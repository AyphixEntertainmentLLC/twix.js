(function(){var t,e,n,i=[].slice;return t="undefined"!=typeof module&&null!==module&&null!=module.exports,e=function(t){return"[object Array]"===Object.prototype.toString.call(t)},n=function(t){var n;if(null==t)throw new Error("Can't find moment");return n=function(){function n(e,n,i,o){var r;null==o&&(o={}),"string"!=typeof i&&(o=null!=i?i:{},i=null),"boolean"==typeof o&&(o={allDay:o}),this._oStart=t(e,i,o.parseStrict),this._oEnd=t(n,i,o.parseStrict),this.allDay=null!=(r=o.allDay)?r:!1,this._mutated()}return n._extend=function(){var t,e,n,o,r,s;for(e=arguments[0],s=2<=arguments.length?i.call(arguments,1):[],n=0,o=s.length;o>n;n++){r=s[n];for(t in r)"undefined"!=typeof r[t]&&(e[t]=r[t])}return e},n.prototype.start=function(){return this._start.clone()},n.prototype.end=function(){return this._end.clone()},n.prototype.isSame=function(t){return this._start.isSame(this._end,t)},n.prototype.length=function(t){return this._displayEnd.diff(this._start,t)},n.prototype.count=function(t){var e,n;return n=this.start().startOf(t),e=this.end().startOf(t),e.diff(n,t)+1},n.prototype.countInner=function(t){var e,n,i;return n=this._inner(t),i=n[0],e=n[1],i>=e?0:e.diff(i,t)},n.prototype.iterate=function(t,e,n){var i,o,r,s;return r=this._prepIterateInputs(t,e,n),t=r[0],e=r[1],n=r[2],s=this.start().startOf(e),i=this.end().startOf(e),this.allDay&&(i=i.add(1,"d")),o=function(t){return function(){return!t.allDay&&i>=s&&(!n||!s.isSame(i)||t._end.hours()>n)||t.allDay&&i>s}}(this),this._iterateHelper(e,s,o,t)},n.prototype.iterateInner=function(t,e){var n,i,o,r,s;return o=this._prepIterateInputs(t,e),t=o[0],e=o[1],r=this._inner(e,t),s=r[0],n=r[1],i=function(){return n>s},this._iterateHelper(e,s,i,t)},n.prototype.humanizeLength=function(){return this.allDay?this.isSame("d")?"all day":this._start.from(this.end().add(1,"d"),!0):this._start.from(this._end,!0)},n.prototype.asDuration=function(){var e;return e=this._end.diff(this._start),t.duration(e)},n.prototype.isPast=function(){return this._lastMilli<t()},n.prototype.isFuture=function(){return this._start>t()},n.prototype.isCurrent=function(){return!this.isPast()&&!this.isFuture()},n.prototype.contains=function(e){return t.isMoment(e)||(e=t(e)),this._start<=e&&this._lastMilli>=e},n.prototype.isEmpty=function(){return this._start.isSame(this._displayEnd)},n.prototype.overlaps=function(t){return this._displayEnd.isAfter(t._start)&&this._start.isBefore(t._displayEnd)},n.prototype.engulfs=function(t){return this._start<=t._start&&this._displayEnd>=t._displayEnd},n.prototype.union=function(t){var e,i,o;return e=this.allDay&&t.allDay,o=this._start<t._start?this._start:t._start,i=this._lastMilli>t._lastMilli?e?this._end:this._displayEnd:e?t._end:t._displayEnd,new n(o,i,e)},n.prototype.intersection=function(t){var e,i,o;return e=this.allDay&&t.allDay,o=this._start>t._start?this._start:t._start,i=this._lastMilli<t._lastMilli?e?this._end:this._displayEnd:e?t._end:t._displayEnd,new n(o,i,e)},n.prototype.xor=function(){var t,e,o,r,s,a,l,u,c,d,p,f,h,m,g,v,y,b;for(m=1<=arguments.length?i.call(arguments,0):[],f=0,y=null,v=[],t=function(){var t,e,n;for(n=[],t=0,e=m.length;e>t;t++)p=m[t],p.allDay&&n.push(p);return n}().length===m.length,e=[],g=[this].concat(m),r=a=0,c=g.length;c>a;r=++a)s=g[r],e.push({time:s._start,i:r,type:0}),e.push({time:s._displayEnd,i:r,type:1});for(e=e.sort(function(t,e){return t.time-e.time}),l=0,d=e.length;d>l;l++)h=e[l],1===h.type&&(f-=1),f===h.type&&(y=h.time),f===(h.type+1)%2&&(y&&(u=v[v.length-1],u&&u._end.isSame(y)?(u._oEnd=h.time,u._mutated()):(o=t?h.time.clone().subtract(1,"d"):h.time,b=new n(y,o,t),b.isEmpty()||v.push(b))),y=null),0===h.type&&(f+=1);return v},n.prototype.difference=function(){var t,e,n,o,r,s;for(n=1<=arguments.length?i.call(arguments,0):[],o=this.xor.apply(this,n).map(function(t){return function(e){return t.intersection(e)}}(this)),r=[],t=0,e=o.length;e>t;t++)s=o[t],!s.isEmpty()&&s.isValid()&&r.push(s);return r},n.prototype.split=function(){var n,o,r,s,a,l,u,c,d,p;if(n=1<=arguments.length?i.call(arguments,0):[],r=u=this.start(),t.isDuration(n[0])?o=n[0]:!t.isMoment(n[0])&&!e(n[0])&&"object"==typeof n[0]||"number"==typeof n[0]&&"string"==typeof n[1]?o=t.duration(n[0],n[1]):d=e(n[0])?n[0]:n,d&&(d=function(){var e,n,i;for(i=[],e=0,n=d.length;n>e;e++)c=d[e],i.push(t(c));return i}(),d=function(){var t,e,n;for(n=[],t=0,e=d.length;e>t;t++)l=d[t],l.isValid()&&l>=u&&n.push(l);return n}().sort()),o&&0===o.asMilliseconds()||d&&0===d.length)return[this];for(p=[],a=0,s=this._displayEnd;s>u&&(null==d||d[a]);)r=o?u.clone().add(o):d[a].clone(),r=t.min(s,r),u.isSame(r)||p.push(t.twix(u,r)),u=r,a+=1;return!r.isSame(this._displayEnd)&&d&&p.push(t.twix(r,this._displayEnd)),p},n.prototype.isValid=function(){return this._start.isValid()&&this._end.isValid()&&this._start<=this._displayEnd},n.prototype.equals=function(t){return t instanceof n&&this.allDay===t.allDay&&this._start.valueOf()===t._start.valueOf()&&this._end.valueOf()===t._end.valueOf()},n.prototype.toString=function(){return"{start: "+this._start.format()+", end: "+this._end.format()+", allDay: "+(this.allDay?"true":"false")+"}"},n.prototype.simpleFormat=function(t,e){var i,o;return i={allDay:"(all day)",template:n.formatTemplate},n._extend(i,e||{}),o=i.template(this._start.format(t),this._end.format(t)),this.allDay&&i.allDay&&(o+=" "+i.allDay),o},n.prototype.format=function(e){var i,o,r,s,a,l,u,c,d,p,f,h,m,g,v,y;if(this.isEmpty())return"";for(p=this._start.localeData()._longDateFormat.LT[0],m={groupMeridiems:!0,spaceBeforeMeridiem:!0,showDate:!0,showDayOfWeek:!1,implicitMinutes:!0,implicitYear:!0,yearFormat:"YYYY",monthFormat:"MMM",weekdayFormat:"ddd",dayFormat:"D",meridiemFormat:"A",hourFormat:p,minuteFormat:"mm",allDay:"all day",explicitAllDay:!1,lastNightEndsAt:0,template:n.formatTemplate},n._extend(m,e||{}),a=[],e&&null!=e.twentyFourHour&&(m.hourFormat=e.twentyFourHour?m.hourFormat.replace("h","H"):m.hourFormat.replace("H","h")),h=m.hourFormat&&"h"===m.hourFormat[0],u=m.lastNightEndsAt>0&&!this.allDay&&this.end().startOf("d").valueOf()===this.start().add(1,"d").startOf("d").valueOf()&&this._start.hours()>12&&this._end.hours()<m.lastNightEndsAt,f=m.showDate||!this.isSame("d")&&!u,this.allDay&&this.isSame("d")&&(!m.showDate||m.explicitAllDay)&&a.push({name:"all day simple",fn:function(){return m.allDay},pre:" ",slot:0}),!f||m.implicitYear&&this._start.year()===t().year()&&this.isSame("y")||a.push({name:"year",fn:function(t){return t.format(m.yearFormat)},pre:", ",slot:4}),!this.allDay&&f&&a.push({name:"all day month",fn:function(t){return t.format(m.monthFormat+" "+m.dayFormat)},ignoreEnd:function(){return u},pre:" ",slot:2}),this.allDay&&f&&a.push({name:"month",fn:function(t){return t.format(m.monthFormat)},pre:" ",slot:2}),this.allDay&&f&&a.push({name:"date",fn:function(t){return t.format(m.dayFormat)},pre:" ",slot:3}),f&&m.showDayOfWeek&&a.push({name:"day of week",fn:function(t){return t.format(m.weekdayFormat)},pre:" ",slot:1}),m.groupMeridiems&&h&&!this.allDay&&a.push({name:"meridiem",fn:function(t){return t.format(m.meridiemFormat)},slot:6,pre:m.spaceBeforeMeridiem?" ":""}),this.allDay||a.push({name:"time",fn:function(t){var e;return e=t.format(0===t.minutes()&&m.implicitMinutes&&h?m.hourFormat:m.hourFormat+":"+m.minuteFormat),!m.groupMeridiems&&h&&(m.spaceBeforeMeridiem&&(e+=" "),e+=t.format(m.meridiemFormat)),e},slot:5,pre:", "}),v=[],o=[],i=[],y=!0,g=function(t){return function(e){var n,s,a;return a=e.fn(t._start),n=e.ignoreEnd&&e.ignoreEnd()?a:e.fn(t._end),s={format:e,value:function(){return a}},n===a&&y?i.push(s):(y&&(y=!1,i.push({format:{slot:e.slot,pre:""},value:function(){return m.template(r(v),r(o,!0).trim())}})),v.push(s),o.push({format:e,value:function(){return n}}))}}(this),c=0,d=a.length;d>c;c++)s=a[c],g(s);return l=!0,(r=function(t,e){var n,i,o,r,s,a;for(o=!0,a="",r=t.sort(function(t,e){return t.format.slot-e.format.slot}),n=0,i=r.length;i>n;n++)s=r[n],l||(a+=o&&e?" ":s.format.pre),a+=s.value(),l=!1,o=!1;return a})(i)},n.prototype._iterateHelper=function(t,e,n,i){return{next:function(){var o;return n()?(o=e.clone(),e.add(i,t),o):null},hasNext:n}},n.prototype._prepIterateInputs=function(){var e,n,o,r,s,a;return e=1<=arguments.length?i.call(arguments,0):[],"number"==typeof e[0]?e:("string"==typeof e[0]&&(r=e.shift(),n=null!=(s=e.pop())?s:1,e.length&&(o=null!=(a=e[0])?a:!1)),t.isDuration(e[0])&&(r="ms",n=e[0].as(r)),[n,r,o])},n.prototype._inner=function(t,e){var n,i,o,r,s;return null==t&&(t="ms"),null==e&&(e=1),s=this.start(),o=this._displayEnd.clone(),s>s.clone().startOf(t)&&s.startOf(t).add(e,t),o<o.clone().endOf(t)&&o.startOf(t),i=s.twix(o).asDuration(t),n=i.get(t),r=n%e,o.subtract(r,t),[s,o]},n.prototype._mutated=function(){return this._start=this.allDay?this._oStart.clone().startOf("d"):this._oStart,this._lastMilli=this.allDay?this._oEnd.clone().endOf("d"):this._oEnd,this._end=this.allDay?this._oEnd.clone().startOf("d"):this._oEnd,this._displayEnd=this.allDay?this._end.clone().add(1,"d"):this._end},n}(),n._extend(t.locale(),{_twix:n.defaults}),n.formatTemplate=function(t,e){return t+" - "+e},t.twix=function(){return function(t,e,n){n.prototype=t.prototype;var i=new n,o=t.apply(i,e);return Object(o)===o?o:i}(n,arguments,function(){})},t.fn.twix=function(){return function(t,e,n){n.prototype=t.prototype;var i=new n,o=t.apply(i,e);return Object(o)===o?o:i}(n,[this].concat(i.call(arguments)),function(){})},t.fn.forDuration=function(t,e){return new n(this,this.clone().add(t),e)},t.duration.fn&&(t.duration.fn.afterMoment=function(e,i){return new n(e,t(e).clone().add(this),i)},t.duration.fn.beforeMoment=function(e,i){return new n(t(e).clone().subtract(this),e,i)}),t.twixClass=n,n},t?module.exports=n(require("moment")):("function"==typeof define&&define("twix",["moment"],function(t){return n(t)}),void(this.moment?this.Twix=n(this.moment):"undefined"!=typeof moment&&null!==moment&&(this.Twix=n(moment))))}).call(this);