(function(){var t,e,n,r=[].slice;return t="undefined"!=typeof module&&null!==module&&null!=module.exports,e=function(t){return"[object Array]"===Object.prototype.toString.call(t)},n=function(t){var n;if(null==t)throw new Error("Can't find moment");return n=function(){function n(e,n,r,i){var o;null==i&&(i={}),"string"!=typeof r&&(i=null!=r?r:{},r=null),"boolean"==typeof i&&(i={allDay:i}),this._oStart=t(e,r,i.parseStrict),this._oEnd=t(n,r,i.parseStrict),this.allDay=null!=(o=i.allDay)?o:!1,this._mutated()}return n._extend=function(){var t,e,n,i,o,a;for(e=arguments[0],a=2<=arguments.length?r.call(arguments,1):[],n=0,i=a.length;i>n;n++){o=a[n];for(t in o)"undefined"!=typeof o[t]&&(e[t]=o[t])}return e},n.prototype.start=function(){return this._start.clone()},n.prototype.end=function(){return this._end.clone()},n.prototype.isSame=function(t){return this._start.isSame(this._end,t)},n.prototype.length=function(t){return this._displayEnd.diff(this._start,t)},n.prototype.count=function(t){var e,n;return n=this.start().startOf(t),e=this.end().startOf(t),e.diff(n,t)+1},n.prototype.countInner=function(t){var e,n,r;return n=this._inner(t),r=n[0],e=n[1],r>=e?0:e.diff(r,t)},n.prototype.iterate=function(t,e,n){var r,i,o,a;return o=this._prepIterateInputs(t,e,n),t=o[0],e=o[1],n=o[2],a=this.start().startOf(e),r=this.end().startOf(e),this.allDay&&(r=r.add(1,"d")),i=function(t){return function(){return!t.allDay&&r>=a&&(!n||!a.isSame(r)||t._end.hours()>n)||t.allDay&&r>a}}(this),this._iterateHelper(e,a,i,t)},n.prototype.iterateInner=function(t,e){var n,r,i,o,a;return i=this._prepIterateInputs(t,e),t=i[0],e=i[1],o=this._inner(e,t),a=o[0],n=o[1],r=function(){return n>a},this._iterateHelper(e,a,r,t)},n.prototype.humanizeLength=function(){return this.allDay?this.isSame("d")?"all day":this._start.from(this.end().add(1,"d"),!0):this._start.from(this._end,!0)},n.prototype.asDuration=function(){var e;return e=this._end.diff(this._start),t.duration(e)},n.prototype.isPast=function(){return this._lastMilli<t()},n.prototype.isFuture=function(){return this._start>t()},n.prototype.isCurrent=function(){return!this.isPast()&&!this.isFuture()},n.prototype.contains=function(e){return t.isMoment(e)||(e=t(e)),this._start<=e&&this._lastMilli>=e},n.prototype.isEmpty=function(){return this._start.isSame(this._displayEnd)},n.prototype.overlaps=function(t){return this._displayEnd.isAfter(t._start)&&this._start.isBefore(t._displayEnd)},n.prototype.engulfs=function(t){return this._start<=t._start&&this._displayEnd>=t._displayEnd},n.prototype.union=function(t){var e,r,i;return e=this.allDay&&t.allDay,i=this._start<t._start?this._start:t._start,r=this._lastMilli>t._lastMilli?e?this._end:this._displayEnd:e?t._end:t._displayEnd,new n(i,r,e)},n.prototype.intersection=function(t){var e,r,i;return e=this.allDay&&t.allDay,i=this._start>t._start?this._start:t._start,r=this._lastMilli<t._lastMilli?e?this._end:this._displayEnd:e?t._end:t._displayEnd,new n(i,r,e)},n.prototype.xor=function(){var t,e,i,o,a,s,u,l,c,d,f,p,h,m,g,y,v,b;for(m=1<=arguments.length?r.call(arguments,0):[],p=0,v=null,y=[],t=function(){var t,e,n;for(n=[],t=0,e=m.length;e>t;t++)f=m[t],f.allDay&&n.push(f);return n}().length===m.length,e=[],g=[this].concat(m),o=s=0,c=g.length;c>s;o=++s)a=g[o],e.push({time:a._start,i:o,type:0}),e.push({time:a._displayEnd,i:o,type:1});for(e=e.sort(function(t,e){return t.time-e.time}),u=0,d=e.length;d>u;u++)h=e[u],1===h.type&&(p-=1),p===h.type&&(v=h.time),p===(h.type+1)%2&&(v&&(l=y[y.length-1],l&&l._end.isSame(v)?(l._oEnd=h.time,l._mutated()):(i=t?h.time.clone().subtract(1,"d"):h.time,b=new n(v,i,t),b.isEmpty()||y.push(b))),v=null),0===h.type&&(p+=1);return y},n.prototype.difference=function(){var t,e,n,i,o,a;for(n=1<=arguments.length?r.call(arguments,0):[],i=this.xor.apply(this,n).map(function(t){return function(e){return t.intersection(e)}}(this)),o=[],t=0,e=i.length;e>t;t++)a=i[t],!a.isEmpty()&&a.isValid()&&o.push(a);return o},n.prototype.split=function(){var n,i,o,a,s,u,l,c,d,f;if(n=1<=arguments.length?r.call(arguments,0):[],o=l=this.start(),t.isDuration(n[0])?i=n[0]:!t.isMoment(n[0])&&!e(n[0])&&"object"==typeof n[0]||"number"==typeof n[0]&&"string"==typeof n[1]?i=t.duration(n[0],n[1]):d=e(n[0])?n[0]:n,d&&(d=function(){var e,n,r;for(r=[],e=0,n=d.length;n>e;e++)c=d[e],r.push(t(c));return r}(),d=function(){var t,e,n;for(n=[],t=0,e=d.length;e>t;t++)u=d[t],u.isValid()&&u>=l&&n.push(u);return n}().sort()),i&&0===i.asMilliseconds()||d&&0===d.length)return[this];for(f=[],s=0,a=this._displayEnd;a>l&&(null==d||d[s]);)o=i?l.clone().add(i):d[s].clone(),o=t.min(a,o),l.isSame(o)||f.push(t.twix(l,o)),l=o,s+=1;return!o.isSame(this._displayEnd)&&d&&f.push(t.twix(o,this._displayEnd)),f},n.prototype.isValid=function(){return this._start.isValid()&&this._end.isValid()&&this._start<=this._displayEnd},n.prototype.equals=function(t){return t instanceof n&&this.allDay===t.allDay&&this._start.valueOf()===t._start.valueOf()&&this._end.valueOf()===t._end.valueOf()},n.prototype.toString=function(){return"{start: "+this._start.format()+", end: "+this._end.format()+", allDay: "+(this.allDay?"true":"false")+"}"},n.prototype.simpleFormat=function(t,e){var r,i;return r={allDay:"(all day)",template:n.formatTemplate},n._extend(r,e||{}),i=r.template(this._start.format(t),this._end.format(t)),this.allDay&&r.allDay&&(i+=" "+r.allDay),i},n.prototype.format=function(e){var r,i,o,a,s,u,l,c,d,f,p,h,m,g,y,v;if(this.isEmpty())return"";for(f=this._start.localeData()._longDateFormat.LT[0],m={groupMeridiems:!0,spaceBeforeMeridiem:!0,showDate:!0,showDayOfWeek:!1,implicitMinutes:!0,implicitYear:!0,yearFormat:"YYYY",monthFormat:"MMM",weekdayFormat:"ddd",dayFormat:"D",meridiemFormat:"A",hourFormat:f,minuteFormat:"mm",allDay:"all day",explicitAllDay:!1,lastNightEndsAt:0,template:n.formatTemplate},n._extend(m,e||{}),s=[],e&&null!=e.twentyFourHour&&(m.hourFormat=e.twentyFourHour?m.hourFormat.replace("h","H"):m.hourFormat.replace("H","h")),h=m.hourFormat&&"h"===m.hourFormat[0],l=m.lastNightEndsAt>0&&!this.allDay&&this.end().startOf("d").valueOf()===this.start().add(1,"d").startOf("d").valueOf()&&this._start.hours()>12&&this._end.hours()<m.lastNightEndsAt,p=m.showDate||!this.isSame("d")&&!l,this.allDay&&this.isSame("d")&&(!m.showDate||m.explicitAllDay)&&s.push({name:"all day simple",fn:function(){return m.allDay},pre:" ",slot:0}),!p||m.implicitYear&&this._start.year()===t().year()&&this.isSame("y")||s.push({name:"year",fn:function(t){return t.format(m.yearFormat)},pre:", ",slot:4}),!this.allDay&&p&&s.push({name:"all day month",fn:function(t){return t.format(m.monthFormat+" "+m.dayFormat)},ignoreEnd:function(){return l},pre:" ",slot:2}),this.allDay&&p&&s.push({name:"month",fn:function(t){return t.format(m.monthFormat)},pre:" ",slot:2}),this.allDay&&p&&s.push({name:"date",fn:function(t){return t.format(m.dayFormat)},pre:" ",slot:3}),p&&m.showDayOfWeek&&s.push({name:"day of week",fn:function(t){return t.format(m.weekdayFormat)},pre:" ",slot:1}),m.groupMeridiems&&h&&!this.allDay&&s.push({name:"meridiem",fn:function(t){return t.format(m.meridiemFormat)},slot:6,pre:m.spaceBeforeMeridiem?" ":""}),this.allDay||s.push({name:"time",fn:function(t){var e;return e=t.format(0===t.minutes()&&m.implicitMinutes&&h?m.hourFormat:m.hourFormat+":"+m.minuteFormat),!m.groupMeridiems&&h&&(m.spaceBeforeMeridiem&&(e+=" "),e+=t.format(m.meridiemFormat)),e},slot:5,pre:", "}),y=[],i=[],r=[],v=!0,g=function(t){return function(e){var n,a,s;return s=e.fn(t._start),n=e.ignoreEnd&&e.ignoreEnd()?s:e.fn(t._end),a={format:e,value:function(){return s}},n===s&&v?r.push(a):(v&&(v=!1,r.push({format:{slot:e.slot,pre:""},value:function(){return m.template(o(y),o(i,!0).trim())}})),y.push(a),i.push({format:e,value:function(){return n}}))}}(this),c=0,d=s.length;d>c;c++)a=s[c],g(a);return u=!0,(o=function(t,e){var n,r,i,o,a,s;for(i=!0,s="",o=t.sort(function(t,e){return t.format.slot-e.format.slot}),n=0,r=o.length;r>n;n++)a=o[n],u||(s+=i&&e?" ":a.format.pre),s+=a.value(),u=!1,i=!1;return s})(r)},n.prototype._iterateHelper=function(t,e,n,r){return{next:function(){var i;return n()?(i=e.clone(),e.add(r,t),i):null},hasNext:n}},n.prototype._prepIterateInputs=function(){var e,n,i,o,a,s;return e=1<=arguments.length?r.call(arguments,0):[],"number"==typeof e[0]?e:("string"==typeof e[0]&&(o=e.shift(),n=null!=(a=e.pop())?a:1,e.length&&(i=null!=(s=e[0])?s:!1)),t.isDuration(e[0])&&(o="ms",n=e[0].as(o)),[n,o,i])},n.prototype._inner=function(t,e){var n,r,i,o,a;return null==t&&(t="ms"),null==e&&(e=1),a=this.start(),i=this._displayEnd.clone(),a>a.clone().startOf(t)&&a.startOf(t).add(e,t),i<i.clone().endOf(t)&&i.startOf(t),r=a.twix(i).asDuration(t),n=r.get(t),o=n%e,i.subtract(o,t),[a,i]},n.prototype._mutated=function(){return this._start=this.allDay?this._oStart.clone().startOf("d"):this._oStart,this._lastMilli=this.allDay?this._oEnd.clone().endOf("d"):this._oEnd,this._end=this.allDay?this._oEnd.clone().startOf("d"):this._oEnd,this._displayEnd=this.allDay?this._end.clone().add(1,"d"):this._end},n}(),n._extend(t.locale(),{_twix:n.defaults}),n.formatTemplate=function(t,e){return t+" - "+e},t.twix=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(n,arguments,function(){})},t.fn.twix=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return Object(i)===i?i:r}(n,[this].concat(r.call(arguments)),function(){})},t.fn.forDuration=function(t,e){return new n(this,this.clone().add(t),e)},t.duration.fn&&(t.duration.fn.afterMoment=function(e,r){return new n(e,t(e).clone().add(this),r)},t.duration.fn.beforeMoment=function(e,r){return new n(t(e).clone().subtract(this),e,r)}),t.twixClass=n,n},t?module.exports=n(require("moment")):("function"==typeof define&&define("twix",["moment"],function(t){return n(t)}),void(this.moment?this.Twix=n(this.moment):"undefined"!=typeof moment&&null!==moment&&(this.Twix=n(moment))))}).call(this);