(function(){var t,n,r,e=[].slice;return t="undefined"!=typeof module&&null!==module&&null!=module.exports,n=function(t){return"[object Array]"===Object.prototype.toString.call(t)},r=function(t){var r;if(null==t)throw new Error("Can't find moment");return r=function(){function r(n,r,e,i){var a;null==i&&(i={}),"string"!=typeof e&&(i=null!=e?e:{},e=null),"boolean"==typeof i&&(i={allDay:i}),this._oStart=t(n,e,i.parseStrict),this._oEnd=t(r,e,i.parseStrict),this.allDay=null!=(a=i.allDay)?a:!1,this._mutated()}return r._extend=function(){var t,n,r,i,a,o;for(n=arguments[0],o=2<=arguments.length?e.call(arguments,1):[],r=0,i=o.length;i>r;r++){a=o[r];for(t in a)"undefined"!=typeof a[t]&&(n[t]=a[t])}return n},r.prototype.start=function(){return this._start.clone()},r.prototype.end=function(){return this._end.clone()},r.prototype.isSame=function(t){return this._start.isSame(this._end,t)},r.prototype.length=function(t){return this._displayEnd.diff(this._start,t)},r.prototype.count=function(t){var n,r;return r=this.start().startOf(t),n=this.end().startOf(t),n.diff(r,t)+1},r.prototype.countInner=function(t){var n,r,e;return r=this._inner(t),e=r[0],n=r[1],e>=n?0:n.diff(e,t)},r.prototype.iterate=function(t,n,r){var e,i,a,o;return a=this._prepIterateInputs(t,n,r),t=a[0],n=a[1],r=a[2],o=this.start().startOf(n),e=this.end().startOf(n),this.allDay&&(e=e.add(1,"d")),i=function(t){return function(){return!t.allDay&&e>=o&&(!r||!o.isSame(e)||t._end.hours()>r)||t.allDay&&e>o}}(this),this._iterateHelper(n,o,i,t)},r.prototype.iterateInner=function(t,n){var r,e,i,a,o;return i=this._prepIterateInputs(t,n),t=i[0],n=i[1],a=this._inner(n,t),o=a[0],r=a[1],e=function(){return r>o},this._iterateHelper(n,o,e,t)},r.prototype.humanizeLength=function(){return this.allDay?this.isSame("d")?"all day":this._start.from(this.end().add(1,"d"),!0):this._start.from(this._end,!0)},r.prototype.asDuration=function(){var n;return n=this._end.diff(this._start),t.duration(n)},r.prototype.isPast=function(){return this._lastMilli<t()},r.prototype.isFuture=function(){return this._start>t()},r.prototype.isCurrent=function(){return!this.isPast()&&!this.isFuture()},r.prototype.contains=function(n){return t.isMoment(n)||(n=t(n)),this._start<=n&&this._lastMilli>=n},r.prototype.isEmpty=function(){return this._start.isSame(this._displayEnd)},r.prototype.overlaps=function(t){return this._displayEnd.isAfter(t._start)&&this._start.isBefore(t._displayEnd)},r.prototype.engulfs=function(t){return this._start<=t._start&&this._displayEnd>=t._displayEnd},r.prototype.union=function(t){var n,e,i;return n=this.allDay&&t.allDay,i=this._start<t._start?this._start:t._start,e=this._lastMilli>t._lastMilli?n?this._end:this._displayEnd:n?t._end:t._displayEnd,new r(i,e,n)},r.prototype.intersection=function(t){var n,e,i;return n=this.allDay&&t.allDay,i=this._start>t._start?this._start:t._start,e=this._lastMilli<t._lastMilli?n?this._end:this._displayEnd:n?t._end:t._displayEnd,new r(i,e,n)},r.prototype.xor=function(){var t,n,i,a,o,s,l,u,h,p,f,d,m,c,y,_,g,D;for(c=1<=arguments.length?e.call(arguments,0):[],d=0,g=null,_=[],t=function(){var t,n,r;for(r=[],t=0,n=c.length;n>t;t++)f=c[t],f.allDay&&r.push(f);return r}().length===c.length,n=[],y=[this].concat(c),a=s=0,h=y.length;h>s;a=++s)o=y[a],n.push({time:o._start,i:a,type:0}),n.push({time:o._displayEnd,i:a,type:1});for(n=n.sort(function(t,n){return t.time-n.time}),l=0,p=n.length;p>l;l++)m=n[l],1===m.type&&(d-=1),d===m.type&&(g=m.time),d===(m.type+1)%2&&(g&&(u=_[_.length-1],u&&u._end.isSame(g)?(u._oEnd=m.time,u._mutated()):(i=t?m.time.clone().subtract(1,"d"):m.time,D=new r(g,i,t),D.isEmpty()||_.push(D))),g=null),0===m.type&&(d+=1);return _},r.prototype.difference=function(){var t,n,r,i,a,o;for(r=1<=arguments.length?e.call(arguments,0):[],i=this.xor.apply(this,r).map(function(t){return function(n){return t.intersection(n)}}(this)),a=[],t=0,n=i.length;n>t;t++)o=i[t],!o.isEmpty()&&o.isValid()&&a.push(o);return a},r.prototype.split=function(){var r,i,a,o,s,l,u,h,p,f;if(r=1<=arguments.length?e.call(arguments,0):[],a=u=this.start(),t.isDuration(r[0])?i=r[0]:!t.isMoment(r[0])&&!n(r[0])&&"object"==typeof r[0]||"number"==typeof r[0]&&"string"==typeof r[1]?i=t.duration(r[0],r[1]):p=n(r[0])?r[0]:r,p&&(p=function(){var n,r,e;for(e=[],n=0,r=p.length;r>n;n++)h=p[n],e.push(t(h));return e}(),p=function(){var t,n,r;for(r=[],t=0,n=p.length;n>t;t++)l=p[t],l.isValid()&&l>=u&&r.push(l);return r}().sort()),i&&0===i.asMilliseconds()||p&&0===p.length)return[this];for(f=[],s=0,o=this._displayEnd;o>u&&(null==p||p[s]);)a=i?u.clone().add(i):p[s].clone(),a=t.min(o,a),u.isSame(a)||f.push(t.twix(u,a)),u=a,s+=1;return!a.isSame(this._displayEnd)&&p&&f.push(t.twix(a,this._displayEnd)),f},r.prototype.isValid=function(){return this._start.isValid()&&this._end.isValid()&&this._start<=this._displayEnd},r.prototype.equals=function(t){return t instanceof r&&this.allDay===t.allDay&&this._start.valueOf()===t._start.valueOf()&&this._end.valueOf()===t._end.valueOf()},r.prototype.toString=function(){return"{start: "+this._start.format()+", end: "+this._end.format()+", allDay: "+(this.allDay?"true":"false")+"}"},r.prototype.simpleFormat=function(t,n){var e,i;return e={allDay:"(all day)",template:r.formatTemplate},r._extend(e,n||{}),i=e.template(this._start.format(t),this._end.format(t)),this.allDay&&e.allDay&&(i+=" "+e.allDay),i},r.prototype.format=function(n){var e,i,a,o,s,l,u,h,p,f,d,m,c,y,_,g;if(this.isEmpty())return"";for(f=this._start.localeData()._longDateFormat.LT[0],c={groupMeridiems:!0,spaceBeforeMeridiem:!0,showDate:!0,showDayOfWeek:!1,implicitMinutes:!0,implicitYear:!0,yearFormat:"YYYY",monthFormat:"MMM",weekdayFormat:"ddd",dayFormat:"D",meridiemFormat:"A",hourFormat:f,minuteFormat:"mm",allDay:"all day",explicitAllDay:!1,lastNightEndsAt:0,template:r.formatTemplate},r._extend(c,n||{}),s=[],n&&null!=n.twentyFourHour&&(c.hourFormat=n.twentyFourHour?c.hourFormat.replace("h","H"):c.hourFormat.replace("H","h")),m=c.hourFormat&&"h"===c.hourFormat[0],u=c.lastNightEndsAt>0&&!this.allDay&&this.end().startOf("d").valueOf()===this.start().add(1,"d").startOf("d").valueOf()&&this._start.hours()>12&&this._end.hours()<c.lastNightEndsAt,d=c.showDate||!this.isSame("d")&&!u,this.allDay&&this.isSame("d")&&(!c.showDate||c.explicitAllDay)&&s.push({name:"all day simple",fn:function(){return c.allDay},pre:" ",slot:0}),!d||c.implicitYear&&this._start.year()===t().year()&&this.isSame("y")||s.push({name:"year",fn:function(t){return t.format(c.yearFormat)},pre:", ",slot:4}),!this.allDay&&d&&s.push({name:"all day month",fn:function(t){return t.format(c.monthFormat+" "+c.dayFormat)},ignoreEnd:function(){return u},pre:" ",slot:2}),this.allDay&&d&&s.push({name:"month",fn:function(t){return t.format(c.monthFormat)},pre:" ",slot:2}),this.allDay&&d&&s.push({name:"date",fn:function(t){return t.format(c.dayFormat)},pre:" ",slot:3}),d&&c.showDayOfWeek&&s.push({name:"day of week",fn:function(t){return t.format(c.weekdayFormat)},pre:" ",slot:1}),c.groupMeridiems&&m&&!this.allDay&&s.push({name:"meridiem",fn:function(t){return t.format(c.meridiemFormat)},slot:6,pre:c.spaceBeforeMeridiem?" ":""}),this.allDay||s.push({name:"time",fn:function(t){var n;return n=t.format(0===t.minutes()&&c.implicitMinutes&&m?c.hourFormat:c.hourFormat+":"+c.minuteFormat),!c.groupMeridiems&&m&&(c.spaceBeforeMeridiem&&(n+=" "),n+=t.format(c.meridiemFormat)),n},slot:5,pre:", "}),_=[],i=[],e=[],g=!0,y=function(t){return function(n){var r,o,s;return s=n.fn(t._start),r=n.ignoreEnd&&n.ignoreEnd()?s:n.fn(t._end),o={format:n,value:function(){return s}},r===s&&g?e.push(o):(g&&(g=!1,e.push({format:{slot:n.slot,pre:""},value:function(){return c.template(a(_),a(i,!0).trim())}})),_.push(o),i.push({format:n,value:function(){return r}}))}}(this),h=0,p=s.length;p>h;h++)o=s[h],y(o);return l=!0,(a=function(t,n){var r,e,i,a,o,s;for(i=!0,s="",a=t.sort(function(t,n){return t.format.slot-n.format.slot}),r=0,e=a.length;e>r;r++)o=a[r],l||(s+=i&&n?" ":o.format.pre),s+=o.value(),l=!1,i=!1;return s})(e)},r.prototype._iterateHelper=function(t,n,r,e){return{next:function(){var i;return r()?(i=n.clone(),n.add(e,t),i):null},hasNext:r}},r.prototype._prepIterateInputs=function(){var n,r,i,a,o,s;return n=1<=arguments.length?e.call(arguments,0):[],"number"==typeof n[0]?n:("string"==typeof n[0]&&(a=n.shift(),r=null!=(o=n.pop())?o:1,n.length&&(i=null!=(s=n[0])?s:!1)),t.isDuration(n[0])&&(a="ms",r=n[0].as(a)),[r,a,i])},r.prototype._inner=function(t,n){var r,e,i,a,o;return null==t&&(t="ms"),null==n&&(n=1),o=this.start(),i=this._displayEnd.clone(),o>o.clone().startOf(t)&&o.startOf(t).add(n,t),i<i.clone().endOf(t)&&i.startOf(t),e=o.twix(i).asDuration(t),r=e.get(t),a=r%n,i.subtract(a,t),[o,i]},r.prototype._mutated=function(){return this._start=this.allDay?this._oStart.clone().startOf("d"):this._oStart,this._lastMilli=this.allDay?this._oEnd.clone().endOf("d"):this._oEnd,this._end=this.allDay?this._oEnd.clone().startOf("d"):this._oEnd,this._displayEnd=this.allDay?this._end.clone().add(1,"d"):this._end},r}(),r._extend(t.locale(),{_twix:r.defaults}),r.formatTemplate=function(t,n){return t+" - "+n},t.twix=function(){return function(t,n,r){r.prototype=t.prototype;var e=new r,i=t.apply(e,n);return Object(i)===i?i:e}(r,arguments,function(){})},t.fn.twix=function(){return function(t,n,r){r.prototype=t.prototype;var e=new r,i=t.apply(e,n);return Object(i)===i?i:e}(r,[this].concat(e.call(arguments)),function(){})},t.fn.forDuration=function(t,n){return new r(this,this.clone().add(t),n)},t.duration.fn&&(t.duration.fn.afterMoment=function(n,e){return new r(n,t(n).clone().add(this),e)},t.duration.fn.beforeMoment=function(n,e){return new r(t(n).clone().subtract(this),n,e)}),t.twixClass=r,r},t?module.exports=r(require("moment")):("function"==typeof define&&define("twix",["moment"],function(t){return r(t)}),void(this.moment?this.Twix=r(this.moment):"undefined"!=typeof moment&&null!==moment&&(this.Twix=r(moment))))}).call(this);