(function(){var t,n,r,e,a=[].slice,o=[].indexOf||function(t){for(var n=0,r=this.length;r>n;n++)if(n in this&&this[n]===t)return n;return-1};if(n="undefined"!=typeof module&&null!==module&&null!=module.exports,e=n?require("moment"):this.moment,null==e)throw"Can't find moment";r=["en"],t=function(){function t(t,n,r){this.start=e(t),this.end=e(n),this.allDay=r||!1}return t._extend=function(){var t,n,r,e,o,i;for(n=arguments[0],e=arguments.length>=2?a.call(arguments,1):[],o=0,i=e.length;i>o;o++){r=e[o];for(t in r)r[t]!==void 0&&(n[t]=r[t])}return n},t.defaults={twentyFourHour:!1,allDaySimple:{fn:function(t){return function(){return t.allDay}},slot:0,pre:" "},dayOfWeek:{fn:function(t){return function(n){return n.format(t.weekdayFormat)}},slot:1,pre:" "},allDayMonth:{fn:function(t){return function(n){return n.format(""+t.monthFormat+" "+t.dayFormat)}},slot:2,pre:" "},month:{fn:function(t){return function(n){return n.format(t.monthFormat)}},slot:2,pre:" "},date:{fn:function(t){return function(n){return n.format(t.dayFormat)}},slot:3,pre:" "},year:{fn:function(t){return function(n){return n.format(t.yearFormat)}},slot:4,pre:", "},time:{fn:function(t){return function(n){var r;return r=0===n.minutes()&&t.implicitMinutes&&!t.twentyFourHour?n.format(t.hourFormat):n.format(""+t.hourFormat+":"+t.minuteFormat),t.groupMeridiems||t.twentyFourHour||(t.spaceBeforeMeridiem&&(r+=" "),r+=n.format(t.meridiemFormat)),r}},slot:5,pre:", "},meridiem:{fn:function(t){return function(n){return n.format(t.meridiemFormat)}},slot:6,pre:function(t){return t.spaceBeforeMeridiem?" ":""}}},t.prototype.isSame=function(t){return this.start.isSame(this.end,t)},t.prototype.length=function(t){return this._trueEnd().add(1,"millisecond").diff(this._trueStart(),t)},t.prototype.count=function(t){var n,r;return r=this.start.clone().startOf(t),n=this.end.clone().startOf(t),n.diff(r,t)+1},t.prototype.countInner=function(t){var n,r,e;return e=this._inner(t),r=e[0],n=e[1],r>=n?0:n.diff(r,t)},t.prototype.iterate=function(t,n){var r,e,a,o=this;return a=this.start.clone().startOf(t),r=this.end.clone().startOf(t),e=function(){return r>=a&&(!n||a.valueOf()!==r.valueOf()||o.end.hours()>n||o.allDay)},this._iterateHelper(t,a,e)},t.prototype.iterateInner=function(t){var n,r,e,a;return a=this._inner(t),e=a[0],n=a[1],r=function(){return n>e},this._iterateHelper(t,e,r)},t.prototype.humanizeLength=function(){return this.allDay?this.isSame("day")?"all day":this.start.from(this.end.clone().add(1,"day"),!0):this.start.from(this.end,!0)},t.prototype.asDuration=function(){var t;return t=this.end.diff(this.start),e.duration(t)},t.prototype.isPast=function(){return this.allDay?this.end.clone().endOf("day")<e():this.end<e()},t.prototype.isFuture=function(){return this.allDay?this.start.clone().startOf("day")>e():this.start>e()},t.prototype.isCurrent=function(){return!this.isPast()&&!this.isFuture()},t.prototype.contains=function(t){return t=e(t),t>=this._trueStart()&&this._trueEnd()>=t},t.prototype.overlaps=function(t){return this._trueEnd().isAfter(t._trueStart())&&this._trueStart().isBefore(t._trueEnd())},t.prototype.engulfs=function(t){return this._trueStart()<=t._trueStart()&&this._trueEnd()>=t._trueEnd()},t.prototype.union=function(n){var r,e,a;return r=this.allDay&&n.allDay,r?(a=this.start<n.start?this.start:n.start,e=this.end>n.end?this.end:n.end):(a=this._trueStart()<n._trueStart()?this._trueStart():n._trueStart(),e=this._trueEnd()>n._trueEnd()?this._trueEnd():n._trueEnd()),new t(a,e,r)},t.prototype.intersection=function(n){var r,a,o,i;return i=this.start>n.start?this.start:n.start,this.allDay?(a=e(this.end),a.add(1,"day"),a.subtract(1,"millisecond"),o=n.allDay?n.end>a?this.end:n.end:n.end>a?a:n.end):o=this.end<n.end?this.end:n.end,r=this.allDay&&n.allDay,new t(i,o,r)},t.prototype.isValid=function(){return this._trueStart()<=this._trueEnd()},t.prototype.equals=function(n){return n instanceof t&&this.allDay===n.allDay&&this.start.valueOf()===n.start.valueOf()&&this.end.valueOf()===n.end.valueOf()},t.prototype.toString=function(){var t;return"{start: "+this.start.format()+", end: "+this.end.format()+", allDay: "+(null!=(t=this.allDay)?t:{"true":"false"})+"}"},t.prototype.simpleFormat=function(n,r){var e,a;return e={allDay:"(all day)"},t._extend(e,r||{}),a=""+this.start.format(n)+" - "+this.end.format(n),this.allDay&&e.allDay&&(a+=" "+e.allDay),a},t.prototype.format=function(n){var r,a,o,i,u,s,l,f,h,d,m,p,c,y,_=this;for(this._lazyLang(),h={groupMeridiems:!0,spaceBeforeMeridiem:!0,showDate:!0,showDayOfWeek:!1,twentyFourHour:this.langData.twentyFourHour,implicitMinutes:!0,implicitYear:!0,yearFormat:"YYYY",monthFormat:"MMM",weekdayFormat:"ddd",dayFormat:"D",meridiemFormat:"A",hourFormat:"h",minuteFormat:"mm",allDay:"all day",explicitAllDay:!1,lastNightEndsAt:0},t._extend(h,n||{}),u=[],h.twentyFourHour&&(h.hourFormat=h.hourFormat.replace("h","H")),l=h.lastNightEndsAt>0&&!this.allDay&&this.end.clone().startOf("day").valueOf()===this.start.clone().add(1,"day").startOf("day").valueOf()&&this.start.hours()>12&&this.end.hours()<h.lastNightEndsAt,f=h.showDate||!this.isSame("day")&&!l,this.allDay&&this.isSame("day")&&(!h.showDate||h.explicitAllDay)&&u.push({name:"all day simple",fn:this._formatFn("allDaySimple",h),pre:this._formatPre("allDaySimple",h),slot:this._formatSlot("allDaySimple")}),!f||h.implicitYear&&this.start.year()===e().year()&&this.isSame("year")||u.push({name:"year",fn:this._formatFn("year",h),pre:this._formatPre("year",h),slot:this._formatSlot("year")}),!this.allDay&&f&&u.push({name:"all day month",fn:this._formatFn("allDayMonth",h),ignoreEnd:function(){return l},pre:this._formatPre("allDayMonth",h),slot:this._formatSlot("allDayMonth")}),this.allDay&&f&&u.push({name:"month",fn:this._formatFn("month",h),pre:this._formatPre("month",h),slot:this._formatSlot("month")}),this.allDay&&f&&u.push({name:"date",fn:this._formatFn("date",h),pre:this._formatPre("date",h),slot:this._formatSlot("date")}),f&&h.showDayOfWeek&&u.push({name:"day of week",fn:this._formatFn("dayOfWeek",h),pre:this._formatPre("dayOfWeek",h),slot:this._formatSlot("dayOfWeek")}),!h.groupMeridiems||h.twentyFourHour||this.allDay||u.push({name:"meridiem",fn:this._formatFn("meridiem",h),pre:this._formatPre("meridiem",h),slot:this._formatSlot("meridiem")}),this.allDay||u.push({name:"time",fn:this._formatFn("time",h),pre:this._formatPre("time",h),slot:this._formatSlot("time")}),m=[],a=[],r=[],p=!0,d=function(t){var n,e,i;return i=t.fn(_.start),n=t.ignoreEnd&&t.ignoreEnd()?i:t.fn(_.end),e={format:t,value:function(){return i}},n===i&&p?r.push(e):(p&&(p=!1,r.push({format:{slot:t.slot,pre:""},value:function(){return""+o(m)+" -"+o(a,!0)}})),m.push(e),a.push({format:t,value:function(){return n}}))},c=0,y=u.length;y>c;c++)i=u[c],d(i);return s=!0,o=function(t,n){var r,e,a,o,i,u;for(r=!0,a="",u=t.sort(function(t,n){return t.format.slot-n.format.slot}),o=0,i=u.length;i>o;o++)e=u[o],s||(a+=r&&n?" ":e.format.pre),a+=e.value(),s=!1,r=!1;return a},o(r)},t.prototype._trueStart=function(){return this.allDay?this.start.clone().startOf("day"):this.start},t.prototype._trueEnd=function(){return this.allDay?this.end.clone().endOf("day"):this.end},t.prototype._iterateHelper=function(t,n,r){return{next:function(){var e;return r()?(e=n.clone(),n.add(1,t),e):null},hasNext:r}},t.prototype._inner=function(t){var n,r;return r=this.start.clone().startOf(t),n=this.end.clone().startOf(t),(this.allDay?n:r).add(t,1),[r,n]},t.prototype._lazyLang=function(){var a,i,u,s;if(u=this.start.lang(),null!=u&&this.end.lang()._abbr!==u._abbr&&this.end.lang(u._abbr),null==this.langData||this.langData._abbr!==u._abbr){if(n&&(s=u._abbr,!(o.call(r,s)>=0))){try{i=require("./lang/"+u._abbr),i(e,t)}catch(l){a=l,console.log("Can't find Twix language definition for "+u._abbr+"; using en formatting.")}r.push(u._abbr)}return this.langData=(null!=u?u._twix:void 0)||t.defaults}},t.prototype._formatFn=function(t,n){return this.langData[t].fn(n)},t.prototype._formatSlot=function(t){return this.langData[t].slot},t.prototype._formatPre=function(t,n){return"function"==typeof this.langData[t].pre?this.langData[t].pre(n):this.langData[t].pre},t.prototype._deprecate=function(t,n,r){return console&&console.warn&&console.warn("#"+t+" is deprecated. Use #"+n+" instead."),r.apply(this)},t.prototype.sameDay=function(){return this._deprecate("sameDay","isSame('day')",function(){return this.isSame("day")})},t.prototype.sameYear=function(){return this._deprecate("sameYear","isSame('year')",function(){return this.isSame("year")})},t.prototype.countDays=function(){return this._deprecate("countDays","countOuter('days')",function(){return this.countOuter("days")})},t.prototype.daysIn=function(t){return this._deprecate("daysIn","iterate('days' [,minHours])",function(){return this.iterate("days",t)})},t.prototype.past=function(){return this._deprecate("past","isPast()",function(){return this.isPast()})},t.prototype.duration=function(){return this._deprecate("duration","humanizeLength()",function(){return this.humanizeLength()})},t.prototype.merge=function(t){return this._deprecate("merge","union(other)",function(){return this.union(t)})},t}(),t._extend(Object.getPrototypeOf(e.fn._lang),{_twix:t.defaults}),"undefined"!=typeof module&&null!==module?module.exports=t:this.Twix=t,e.twix=function(){return function(t,n,r){r.prototype=t.prototype;var e=new r,a=t.apply(e,n);return Object(a)===a?a:e}(t,arguments,function(){})},e.fn.twix=function(){return function(t,n,r){r.prototype=t.prototype;var e=new r,a=t.apply(e,n);return Object(a)===a?a:e}(t,[this].concat(a.call(arguments)),function(){})},e.fn.forDuration=function(n,r){return new t(this,this.clone().add(n),r)},e.duration.fn.afterMoment=function(n,r){return new t(n,e(n).clone().add(this),r)},e.duration.fn.beforeMoment=function(n,r){return new t(e(n).clone().subtract(this),n,r)}}).call(this);