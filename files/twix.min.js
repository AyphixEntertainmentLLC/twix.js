(function(){var t,r,n,e,a=[].slice,o=[].indexOf||function(t){for(var r=0,n=this.length;n>r;r++)if(r in this&&this[r]===t)return r;return-1};if(r="undefined"!=typeof module&&null!==module&&null!=module.exports,e=r?require("moment"):this.moment,null==e)throw"Can't find moment";n=["en"],t=function(){function t(t,r,n){this.start=e(t),this.end=e(r),this.allDay=n||!1}return t._extend=function(){var t,r,n,e,o,i;for(r=arguments[0],e=arguments.length>=2?a.call(arguments,1):[],o=0,i=e.length;i>o;o++){n=e[o];for(t in n)n[t]!==void 0&&(r[t]=n[t])}return r},t.defaults={twentyFourHour:!1,allDaySimple:{fn:function(t){return function(){return t.allDay}},slot:0,pre:" "},dayOfWeek:{fn:function(t){return function(r){return r.format(t.weekdayFormat)}},slot:1,pre:" "},allDayMonth:{fn:function(t){return function(r){return r.format(""+t.monthFormat+" "+t.dayFormat)}},slot:2,pre:" "},month:{fn:function(t){return function(r){return r.format(t.monthFormat)}},slot:2,pre:" "},date:{fn:function(t){return function(r){return r.format(t.dayFormat)}},slot:3,pre:" "},year:{fn:function(t){return function(r){return r.format(t.yearFormat)}},slot:4,pre:", "},time:{fn:function(t){return function(r){var n;return n=0===r.minutes()&&t.implicitMinutes&&!t.twentyFourHour?r.format(t.hourFormat):r.format(""+t.hourFormat+":"+t.minuteFormat),t.groupMeridiems||t.twentyFourHour||(t.spaceBeforeMeridiem&&(n+=" "),n+=r.format(t.meridiemFormat)),n}},slot:5,pre:", "},meridiem:{fn:function(t){return function(r){return r.format(t.meridiemFormat)}},slot:6,pre:function(t){return t.spaceBeforeMeridiem?" ":""}}},t.registerLang=function(r,n){return e.lang(r,{twix:t._extend({},t.defaults,n)})},t.prototype.isSame=function(t){return this.start.isSame(this.end,t)},t.prototype.length=function(t){return this._trueEnd().add(1,"millisecond").diff(this._trueStart(),t)},t.prototype.count=function(t){var r,n;return n=this.start.clone().startOf(t),r=this.end.clone().startOf(t),r.diff(n,t)+1},t.prototype.countInner=function(t){var r,n,e;return e=this._inner(t),n=e[0],r=e[1],n>=r?0:r.diff(n,t)},t.prototype.iterate=function(t,r){var n,e,a,o=this;return a=this.start.clone().startOf(t),n=this.end.clone().startOf(t),e=function(){return n>=a&&(!r||a.valueOf()!==n.valueOf()||o.end.hours()>r||o.allDay)},this._iterateHelper(t,a,e)},t.prototype.iterateInner=function(t){var r,n,e,a;return a=this._inner(t),e=a[0],r=a[1],n=function(){return r>e},this._iterateHelper(t,e,n)},t.prototype.humanizeLength=function(){return this.allDay?this.isSame("day")?"all day":this.start.from(this.end.clone().add(1,"day"),!0):this.start.from(this.end,!0)},t.prototype.asDuration=function(){var t;return t=this.end.diff(this.start),e.duration(t)},t.prototype.isPast=function(){return this.allDay?this.end.clone().endOf("day")<e():this.end<e()},t.prototype.isFuture=function(){return this.allDay?this.start.clone().startOf("day")>e():this.start>e()},t.prototype.isCurrent=function(){return!this.isPast()&&!this.isFuture()},t.prototype.contains=function(t){return t=e(t),t>=this._trueStart()&&this._trueEnd()>=t},t.prototype.overlaps=function(t){return this._trueEnd().isAfter(t._trueStart())&&this._trueStart().isBefore(t._trueEnd())},t.prototype.engulfs=function(t){return this._trueStart()<=t._trueStart()&&this._trueEnd()>=t._trueEnd()},t.prototype.union=function(r){var n,e,a;return n=this.allDay&&r.allDay,n?(a=this.start<r.start?this.start:r.start,e=this.end>r.end?this.end:r.end):(a=this._trueStart()<r._trueStart()?this._trueStart():r._trueStart(),e=this._trueEnd()>r._trueEnd()?this._trueEnd():r._trueEnd()),new t(a,e,n)},t.prototype.intersection=function(r){var n,a,o,i;return i=this.start>r.start?this.start:r.start,this.allDay?(a=e(this.end),a.add(1,"day"),a.subtract(1,"millisecond"),o=r.allDay?r.end>a?this.end:r.end:r.end>a?a:r.end):o=this.end<r.end?this.end:r.end,n=this.allDay&&r.allDay,new t(i,o,n)},t.prototype.isValid=function(){return this._trueStart()<=this._trueEnd()},t.prototype.equals=function(r){return r instanceof t&&this.allDay===r.allDay&&this.start.valueOf()===r.start.valueOf()&&this.end.valueOf()===r.end.valueOf()},t.prototype.toString=function(){var t;return"{start: "+this.start.format()+", end: "+this.end.format()+", allDay: "+(null!=(t=this.allDay)?t:{"true":"false"})+"}"},t.prototype.simpleFormat=function(r,n){var e,a;return e={allDay:"(all day)"},t._extend(e,n||{}),a=""+this.start.format(r)+" - "+this.end.format(r),this.allDay&&e.allDay&&(a+=" "+e.allDay),a},t.prototype.format=function(r){var n,a,o,i,u,s,l,f,h,d,m,c,p,y,_=this;for(this._lazyLang(),h={groupMeridiems:!0,spaceBeforeMeridiem:!0,showDate:!0,showDayOfWeek:!1,twentyFourHour:this.langData.twentyFourHour,implicitMinutes:!0,implicitYear:!0,yearFormat:"YYYY",monthFormat:"MMM",weekdayFormat:"ddd",dayFormat:"D",meridiemFormat:"A",hourFormat:"h",minuteFormat:"mm",allDay:"all day",explicitAllDay:!1,lastNightEndsAt:0},t._extend(h,r||{}),u=[],h.twentyFourHour&&(h.hourFormat=h.hourFormat.replace("h","H")),l=h.lastNightEndsAt>0&&!this.allDay&&this.end.clone().startOf("day").valueOf()===this.start.clone().add(1,"day").startOf("day").valueOf()&&this.start.hours()>12&&this.end.hours()<h.lastNightEndsAt,f=h.showDate||!this.isSame("day")&&!l,this.allDay&&this.isSame("day")&&(!h.showDate||h.explicitAllDay)&&u.push({name:"all day simple",fn:this._formatFn("allDaySimple",h),pre:this._formatPre("allDaySimple",h),slot:this._formatSlot("allDaySimple")}),!f||h.implicitYear&&this.start.year()===e().year()&&this.isSame("year")||u.push({name:"year",fn:this._formatFn("year",h),pre:this._formatPre("year",h),slot:this._formatSlot("year")}),!this.allDay&&f&&u.push({name:"all day month",fn:this._formatFn("allDayMonth",h),ignoreEnd:function(){return l},pre:this._formatPre("allDayMonth",h),slot:this._formatSlot("allDayMonth")}),this.allDay&&f&&u.push({name:"month",fn:this._formatFn("month",h),pre:this._formatPre("month",h),slot:this._formatSlot("month")}),this.allDay&&f&&u.push({name:"date",fn:this._formatFn("date",h),pre:this._formatPre("date",h),slot:this._formatSlot("date")}),f&&h.showDayOfWeek&&u.push({name:"day of week",fn:this._formatFn("dayOfWeek",h),pre:this._formatPre("dayOfWeek",h),slot:this._formatSlot("dayOfWeek")}),!h.groupMeridiems||h.twentyFourHour||this.allDay||u.push({name:"meridiem",fn:this._formatFn("meridiem",h),pre:this._formatPre("meridiem",h),slot:this._formatSlot("meridiem")}),this.allDay||u.push({name:"time",fn:this._formatFn("time",h),pre:this._formatPre("time",h),slot:this._formatSlot("time")}),m=[],a=[],n=[],c=!0,d=function(t){var r,e,i;return i=t.fn(_.start),r=t.ignoreEnd&&t.ignoreEnd()?i:t.fn(_.end),e={format:t,value:function(){return i}},r===i&&c?n.push(e):(c&&(c=!1,n.push({format:{slot:t.slot,pre:""},value:function(){return""+o(m)+" -"+o(a,!0)}})),m.push(e),a.push({format:t,value:function(){return r}}))},p=0,y=u.length;y>p;p++)i=u[p],d(i);return s=!0,o=function(t,r){var n,e,a,o,i,u;for(n=!0,a="",u=t.sort(function(t,r){return t.format.slot-r.format.slot}),o=0,i=u.length;i>o;o++)e=u[o],s||(a+=n&&r?" ":e.format.pre),a+=e.value(),s=!1,n=!1;return a},o(n)},t.prototype._trueStart=function(){return this.allDay?this.start.clone().startOf("day"):this.start},t.prototype._trueEnd=function(){return this.allDay?this.end.clone().endOf("day"):this.end},t.prototype._iterateHelper=function(t,r,n){return{next:function(){var e;return n()?(e=r.clone(),r.add(1,t),e):null},hasNext:n}},t.prototype._inner=function(t){var r,n;return n=this.start.clone().startOf(t),r=this.end.clone().startOf(t),(this.allDay?r:n).add(t,1),[n,r]},t.prototype._lazyLang=function(){var e,a,i,u;if(i=this.start.lang(),null!=i&&this.end.lang()._abbr!==i._abbr&&this.end.lang(i._abbr),null==this.langData||this.langData._abbr!==i._abbr){if(r&&(u=i._abbr,!(o.call(n,u)>=0))){try{a=require("./lang/"+i._abbr),a(t)}catch(s){e=s,console.log("Can't find Twix language definition for "+i._abbr+"; using en formatting: "+e)}n.push(i._abbr)}return this.langData=(null!=i?i._twix:void 0)||t.defaults}},t.prototype._formatFn=function(t,r){return this.langData[t].fn(r)},t.prototype._formatSlot=function(t){return this.langData[t].slot},t.prototype._formatPre=function(t,r){return"function"==typeof this.langData[t].pre?this.langData[t].pre(r):this.langData[t].pre},t.prototype._deprecate=function(t,r,n){return console&&console.warn&&console.warn("#"+t+" is deprecated. Use #"+r+" instead."),n.apply(this)},t.prototype.sameDay=function(){return this._deprecate("sameDay","isSame('day')",function(){return this.isSame("day")})},t.prototype.sameYear=function(){return this._deprecate("sameYear","isSame('year')",function(){return this.isSame("year")})},t.prototype.countDays=function(){return this._deprecate("countDays","countOuter('days')",function(){return this.countOuter("days")})},t.prototype.daysIn=function(t){return this._deprecate("daysIn","iterate('days' [,minHours])",function(){return this.iterate("days",t)})},t.prototype.past=function(){return this._deprecate("past","isPast()",function(){return this.isPast()})},t.prototype.duration=function(){return this._deprecate("duration","humanizeLength()",function(){return this.humanizeLength()})},t.prototype.merge=function(t){return this._deprecate("merge","union(other)",function(){return this.union(t)})},t}(),t._extend(Object.getPrototypeOf(e.fn._lang),{_twix:t.defaults}),"undefined"!=typeof module&&null!==module?module.exports=t:this.Twix=t,e.twix=function(){return function(t,r,n){n.prototype=t.prototype;var e=new n,a=t.apply(e,r);return Object(a)===a?a:e}(t,arguments,function(){})},e.fn.twix=function(){return function(t,r,n){n.prototype=t.prototype;var e=new n,a=t.apply(e,r);return Object(a)===a?a:e}(t,[this].concat(a.call(arguments)),function(){})},e.fn.forDuration=function(r,n){return new t(this,this.clone().add(r),n)},e.duration.fn.afterMoment=function(r,n){return new t(r,e(r).clone().add(this),n)},e.duration.fn.beforeMoment=function(r,n){return new t(e(r).clone().subtract(this),r,n)}}).call(this);